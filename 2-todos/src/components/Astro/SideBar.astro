---
import { Button } from "../preact/Button";
import { AddButton } from "../preact/sidebar/AddButton";
import { DropDown } from "../preact/DropDown";
import { Modal } from "../preact/Modal";
import { AddTaskForm } from "../preact/sidebar/AddTaskForm";

interface Props {
    class?: string;
}

const { pathname: currentPage } = Astro.url;
const { class: className } = Astro.props;
---

<nav
    class=`w-[20%] h-full bg-neutral-100/50 rounded-r-lg p-3 grid grid-cols-1 grid-rows-[38px_32px_7fr_1fr] ${className}`
>
    <div>
        <section class=`flex relative h-8 items-center justify-between`>
            <DropDown client:load class="m-0 p-0" />
            <Button
                class="flex *:content-center *:ml-1 h-7 w-7 absolute *:mr-0 *:px-0 right-8"
                icon="bell"
            />
        </section>
    </div>
    <AddButton />
    <section class="my-2 h-[30%] *:h-8 *:px-2">
        <Button icon="search" class="w-full"> Search </Button>
        <Button page={currentPage} to="/dashboard/inbox" icon="inbox" class="">
            Inbox
        </Button>
        <Button
            page={currentPage}
            to="/dashboard/today"
            icon="calendar"
            class=""
        >
            Today
        </Button>
        <Button
            page={currentPage}
            to="/dashboard/upcoming"
            icon="sunrise"
            class=""
        >
            Upcoming
        </Button>
        <Button page={currentPage} to="/dashboard/filters" icon="grid" class="">
            Filters & labels
        </Button>
    </section>
    <Modal
        class="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-3/2 z-[100]"
        id="add-task-modal"
    >
        <div class="bg-white w-xl text-center shadow-theme-2 rounded-lg p-2">
            <AddTaskForm client:idle />
        </div>
    </Modal>
</nav>

<section class="self-end">
    <Button icon="plus" to="/" class="">Logout</Button>
</section>
